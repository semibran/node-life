"use strict";var _slicedToArray=function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(r,e){var t=[],n=!0,a=!1,i=void 0;try{for(var o,l=r[Symbol.iterator]();!(n=(o=l.next()).done)&&(t.push(o.value),!e||t.length!==e);n=!0);}catch(r){a=!0,i=r}finally{try{!n&&l.return&&l.return()}finally{if(a)throw i}}return t}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function _toConsumableArray(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}return Array.from(r)}!function(){var t=function(r,e){var t=[],n=r.length;if(!n)return t;for(var a=0;a<r.length;a+=2){for(var i=r[a],o=r[a+1],l=0,u=-1;u<=1;u++)for(var v=o+u,c=-1;c<=1;c++)if(c||u){for(var s=i+c,f=0;f<r.length&&(r[f]!==s||r[f+1]!==v);f+=2);f<r.length?f<n&&l++:a<n&&r.push(s,v)}(-1!==e.birth.indexOf(l)&&n<=a||-1!==e.survival.indexOf(l)&&a<n)&&t.push(i,o)}return r.length=n,t};function e(r,e){return e||(e={birth:[3],survival:[2,3]}),{cells:r,rule:e,prev:null}}function n(r,e){var t=document.createElement("canvas");t.width=r,t.height=e;var n=t.getContext("2d");return{context:n,image:n.getImageData(0,0,r,e)}}e.update=function(r){var e=t(r.cells,r.rule);r.prev=r.cells,r.cells=e},n.render=function(r,e){!function(r,e,t){var n=_slicedToArray(t.size,2),a=n[0],i=n[1],o=_slicedToArray(t.position,2),l=o[0],u=o[1];l-=a/2,u-=i/2;for(var v=0;v<e.prev.length;v+=2){var c=e.prev[v],s=e.prev[v+1];if(l<=c&&u<=s&&c<l+a&&s<u+i){var f=4*((s-u)*r.width+(c-l));r.data[f+3]=0}}for(var d=0;d<e.cells.length;d+=2){var h=e.cells[d],p=e.cells[d+1];if(l<=h&&u<=p&&h<l+a&&p<u+i){var y=4*((p-u)*r.width+(h-l));r.data[y+3]=255}}}(r.image,e.world,e.viewport),r.context.putImageData(r.image,0,0)};var a=e([1,0,2,0,0,1,1,1,1,2].slice()),r={size:[256,256],position:[0,0]},i={world:a,viewport:r},o=n.apply(void 0,_toConsumableArray(r.size));document.body.appendChild(o.context.canvas),requestAnimationFrame(function r(){e.update(a);n.render(o,i);requestAnimationFrame(r)})}();